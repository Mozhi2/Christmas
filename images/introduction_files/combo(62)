YUI.add("search-photos-albums-new-view",(function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,emptySearch:!1,subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerWithTemplate("search-photos-albums-new",{loading:!0,placeholderHeight:240}),this.params=t,this.unifiedSubviewParams=t.unifiedSubviewParams||{},this.unifiedSubviewParams.albums&&this.unifiedSubviewParams.albums.fetchParams?(this.fetchParams=this.unifiedSubviewParams.albums.fetchParams,this.apiParams=e.merge(this.fetchParams.apiParams||{}),this.searchId=this.unifiedSubviewParams.albums.id):(this.apiParams={},this.fetchParams={}),this.searchUrl=new e.SearchUrl(this.apiParams,this.appContext,e.SearchUrl.searchTypes.PHOTOS),this.viewingAll=this.apiParams[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll],t.modelRegistryName="search-sets-models",t.photoListConfig={modelParams:{registryName:"search-sets-models",modelIdOrAttributes:this.searchId||this.searchUrl.getId(),collectionAttributeName:"sets",fetchParams:this.fetchParams},pageParams:{page:1,perPage:25,perPageDoubling:1},interactionViewName:"photo-list-album-interaction-view",engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial",parentName:this.name,viewBeaconAttribute:"primary",measureAFT:!0,maintainScrollPosition:!1},t.photoListConfig.layout={targetRowHeight:240,forceAspectRatio:1,containerPadding:{top:8,right:0,bottom:8,left:0},itemSpacing:{horizontal:16,vertical:16},alwaysDisplayOrphans:!0},this.isMobile&&(t.photoListConfig.layout.targetRowHeight=200),this.viewingAll||(t.photoListConfig.layout.maxNumRows=1),this},loadState:function(){var e=this;return this.appContext.getModel("search-sets-models",this.searchId||this.searchUrl.getId(),this.fetchParams).then((function(t){e.searchModel=t,t.getValue("totalItems")<=0&&(e.emptySearch=!0)}))},buildHeadContainer:function(){this.set("headContainer",this.subviews["photo-list-view"].get("headContainer")),this.subviews["photo-list-view"].handleResize(null,!0)},buildContainer:function(){var t;return this.searchUrl.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.albums,!0),this.searchUrl.setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll,!0),t={emptySearch:this.emptySearch,viewAllLink:this.searchUrl.getURL(),viewingAll:this.viewingAll,total:this.searchModel.getValue("totalItems")},this.setContainerWithTemplate("search-photos-albums-new",t),this},activate:function(){return this}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","search-sets-models","search-url","search-helper","hermes-template-search-photos-albums-new"],optionalRequires:["global-events","hermes-core"],langBundles:["search","common"]});YUI.add("search-photos-yours-view",(function(e){var t={"photo-models":{name:"photo-list-photo-view",params:{excludePeople:!1}},"photo-lite-models":{name:"photo-list-photo-view",params:{excludePeople:!1}}},i={jst:{rowHeight:150,subviewMapping:t},thm:{rowHeight:120,forceAspectRatio:1,subviewMapping:t},til:{rowHeight:210,forceAspectRatio:1,subviewMapping:Object.assign({},t,{"photo-models":{name:"photo-list-tile-view",params:{excludePeople:!1,showDescription:!1}},"photo-lite-models":{name:"photo-list-tile-view",params:{excludePeople:!1,showDescription:!1}}})},desc:{rowHeight:210,itemSpacing:{horizontal:4,vertical:70},subviewMapping:{"photo-models":{name:"photo-list-description-view"},"photo-lite-models":{name:"photo-list-description-view"}}}};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,emptySearch:!1,initializer:function(t){var s,o,a,r;return r=t.rowHeightMod||1,"til"===t.viewType&&(r=Math.max(1,t.rowHeightMod)),""===this.get("container").get("innerHTML")&&this.setContainerWithTemplate("search-photos-single-row",{loading:!0,title:this.intlMessage({intlName:"search.YOUR_PHOTOS"}),placeholderHeight:i[t.viewType].rowHeight*r}),this.unifiedSubviewParams=t.unifiedSubviewParams||{},this.unifiedSubviewParams.yours&&this.unifiedSubviewParams.yours.fetchParams?(this.fetchParams=this.unifiedSubviewParams.yours.fetchParams,this.apiParams=e.merge(this.fetchParams.apiParams||{}),this.searchId=this.unifiedSubviewParams.yours.id,this.title=this.unifiedSubviewParams.yours.title):(this.apiParams={},this.fetchParams={}),this.searchUrl=new e.SearchUrl(this.apiParams,this.appContext,e.SearchUrl.searchTypes.PHOTOS),s=i[t.viewType].forceAspectRatio,o=e.clone(i[t.viewType].subviewMapping),a=e.clone(i[t.viewType].itemSpacing),t.photoListConfig={modelParams:{registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchId||this.searchUrl.getId(),collectionAttributeName:"photos",fetchParams:this.fetchParams},pageParams:e.merge(this.fetchParams),paginateOnScroll:!1,keepAwakeOnScroll:!0,parentName:this.name,engagementModelName:"photo-lite-models",injectPhotolistContextParams:{rapidBeaconConfig:{beaconName:"searchYourPhotosResultClick",itemIndexKey:"vespaRnk",searchSection:"photos-yours",searchTerm:t.searchTerm}},measureAFT:!0,mobileLayout:t.allowMobileLayout?{}:null,layout:{containerPadding:{top:0,right:0,bottom:0,left:0},targetRowHeight:i[t.viewType].rowHeight*r,maxNumRows:1,alwaysDisplayOrphans:!0}},s&&(t.photoListConfig.layout.forceAspectRatio=s),o&&(t.photoListConfig.subviewMapping=o),a&&(t.photoListConfig.layout.itemSpacing=a),t.viewType===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified&&(t.photoListConfig.layout.itemSpacing={horizontal:4,vertical:4}),this.rowHeightMod=t.rowHeightMod,this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){var t=this;return this.apiFailed?e.Promise.resolve():this.appContext.getModel("search-photos-lite-models",this.searchId||this.searchUrl.getId(),this.fetchParams).then((function(e){t.searchModel=e,e.getValue("totalItems")<=0&&(t.emptySearch=!0)}))},buildContainer:function(){return this.setContainerWithTemplate("search-photos-single-row",{emptySearch:this.emptySearch,total:this.searchModel.getValue("totalItems"),singleResult:1===this.searchModel.getValue("totalItems"),viewAll:this.searchUrl.clone().setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll,!0).getURL(),viewAllDataTrack:"search-viewall-user",title:this.title||this.intlMessage({intlName:"search.YOUR_PHOTOS"})}),this},buildHeadContainer:function(){this.set("headContainer",this.subviews["photo-list-view"].get("headContainer")),this.subviews["photo-list-view"].handleResize(null,!0)},activate:function(){return this},onParentViewEvent:function(e,t){if("search:layoutChange"===(t&&t.length&&t[0]))t[1]&&this.handleLayoutChange(t[1])},handleLayoutChange:function(t){var s=this.subviews["photo-list-view"],o=s.photoListLayout,a=i[t].forceAspectRatio,r=e.clone(i[t].subviewMapping),h=this.rowHeightMod;i.hasOwnProperty(t)&&("til"===t&&(h=Math.max(1,h)),o.targetRowHeight=i[t].rowHeight*h,o.forceAspectRatio=a,s.subviewMapping=r,s.setItems(this.searchModel.getValue("photos").getList()))}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-photos-single-row","photo-list-view","search-photos-lite-models","search-helper","person-preferences-models"],langBundles:["search","common"]});YUI.add("search-photos-contacts-view",(function(e){var t={"photo-models":{name:"photo-list-photo-view",params:{excludePeople:!0}},"photo-lite-models":{name:"photo-list-photo-view",params:{excludePeople:!0}}},i={jst:{rowHeight:150,subviewMapping:t},thm:{rowHeight:120,forceAspectRatio:1,subviewMapping:t},til:{rowHeight:210,forceAspectRatio:1,subviewMapping:{"photo-models":{name:"photo-list-tile-view",params:{excludePeople:!0,showDescription:!1}},"photo-lite-models":{name:"photo-list-tile-view",params:{excludePeople:!0,showDescription:!1}}}},desc:{rowHeight:210,itemSpacing:{horizontal:4,vertical:70},subviewMapping:{"photo-models":{name:"photo-list-description-view"},"photo-lite-models":{name:"photo-list-description-view"}}}};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,emptySearch:!1,initializer:function(t){var s,o,a,h,r;if(h=t.rowHeightMod||1,"til"===t.viewType&&(h=Math.max(1,t.rowHeightMod)),this.unifiedSubviewParams=t.unifiedSubviewParams||{},this.unifiedSubviewParams.contacts&&this.unifiedSubviewParams.contacts.fetchParams?(this.fetchParams=this.unifiedSubviewParams.contacts.fetchParams,this.apiParams=e.merge(this.fetchParams.apiParams||{}),this.searchId=this.unifiedSubviewParams.contacts.id,this.title=this.unifiedSubviewParams.contacts.title):(this.apiParams={},this.fetchParams={}),""===this.get("container").get("innerHTML")&&this.setContainerWithTemplate("search-photos-single-row",{loading:!0,title:this.title||this.intlMessage({intlName:"search.FROM_PEOPLE_YOU_FOLLOW"}),placeholderHeight:i[t.viewType].rowHeight*h}),this.searchUrl=new e.SearchUrl(this.apiParams,this.appContext,e.SearchUrl.searchTypes.PHOTOS),s=i[t.viewType].forceAspectRatio,o=e.clone(i[t.viewType].subviewMapping),a=e.clone(i[t.viewType].itemSpacing),t.photoListConfig={modelParams:{registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchId||this.searchUrl.getId(),collectionAttributeName:"photos",fetchParams:this.fetchParams},pageParams:e.merge(this.fetchParams),paginateOnScroll:!1,keepAwakeOnScroll:!0,parentName:this.name,engagementModelName:"photo-lite-models",injectPhotolistContextParams:{rapidBeaconConfig:{beaconName:"searchContactsPhotoResultClick",itemIndexKey:"vespaRnk",searchSection:"photos-contacts",searchTerm:t.searchTerm}},measureAFT:!0,mobileLayout:t.allowMobileLayout?{}:null,layout:{containerPadding:{top:0,right:0,bottom:0,left:0},targetRowHeight:i[t.viewType].rowHeight*h,maxNumRows:1,alwaysDisplayOrphans:!0}},s&&(t.photoListConfig.layout.forceAspectRatio=s),o&&(t.photoListConfig.subviewMapping=o,t.suppressExcludePeople))for(r in o)t.photoListConfig.subviewMapping[r].params&&(t.photoListConfig.subviewMapping[r].params.excludePeople=!1);return a&&(t.photoListConfig.layout.itemSpacing=a),t.viewType===e.Models["person-preferences-models"].UNIFIED_SEARCH_VIEW_TYPES.justified&&(t.photoListConfig.layout.itemSpacing={horizontal:4,vertical:4}),this.rowHeightMod=t.rowHeightMod,this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},loadState:function(){var t=this;return this.apiFailed?e.Promise.resolve():this.appContext.getModel("search-photos-lite-models",this.searchId||this.searchUrl.getId(),this.fetchParams).then((function(e){t.searchModel=e,e.getValue("totalItems")<=0&&(t.emptySearch=!0)}))},buildContainer:function(){return this.setContainerWithTemplate("search-photos-single-row",{emptySearch:this.emptySearch,total:this.searchModel.getValue("totalItems"),singleResult:1===this.searchModel.getValue("totalItems"),viewAll:this.searchUrl.clone().setAPIParam(e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll,!0).getURL(),viewAllDataTrack:"search-viewall-contacts","photo-list-view":this.subviews["photo-list-view"].get("container"),title:this.title||this.intlMessage({intlName:"search.FROM_PEOPLE_YOU_FOLLOW"})}),this},buildHeadContainer:function(){this.set("headContainer",this.subviews["photo-list-view"].get("headContainer")),this.subviews["photo-list-view"].handleResize(null,!0)},activate:function(){return this},onParentViewEvent:function(e,t){if("search:layoutChange"===(t&&t.length&&t[0]))t[1]&&this.handleLayoutChange(t[1])},handleLayoutChange:function(t){var s=this.subviews["photo-list-view"],o=s.photoListLayout,a=i[t].forceAspectRatio,h=e.clone(i[t].subviewMapping),r=this.rowHeightMod;i.hasOwnProperty(t)&&("til"===t&&(r=Math.max(1,r)),o.targetRowHeight=i[t].rowHeight*r,o.forceAspectRatio=a,s.subviewMapping=h,s.setItems(this.searchModel.getValue("photos").getList()))}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-photos-single-row","photo-list-view","search-photos-lite-models","search-helper","person-preferences-models"],langBundles:["search","common"]});YUI.add("hermes-template-moola-search-view",(function(l,a){var t=l.Template.Handlebars.revive({1:function(l,a,t,e,n){return"\t\t<div>\n\t\t</div>\n"},3:function(l,a,t,e,n){var o,r=l.lookupProperty||function(l,a){if(Object.prototype.hasOwnProperty.call(l,a))return l[a]};return'\t\t<div class="'+l.escapeExpression(l.lambda(null!=(o=null!=(o=null!=a?r(a,"templateData"):a)?r(o,"classes"):o)?r(o,"container"):o,a))+'">\n'+(null!=(o=r(t,"if").call(null!=a?a:l.nullContext||{},null!=(o=null!=(o=null!=a?r(a,"templateData"):a)?r(o,"ads"):o)?r(o,"scrollThresholdReached"):o,{name:"if",hash:{},fn:l.program(4,n,0),inverse:l.noop,data:n,loc:{start:{line:7,column:3},end:{line:14,column:10}}}))?o:"")+"\t\t</div>\n"},4:function(l,a,t,e,n){var o,r=l.lambda,i=l.escapeExpression,s=l.lookupProperty||function(l,a){if(Object.prototype.hasOwnProperty.call(l,a))return l[a]};return'\t\t\t\t<div class="'+i(r(null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"classes"):o)?s(o,"unitA"):o,a))+'">\n'+(null!=(o=l.invokePartial(s(e,"prbd-moola-position"),a,{name:"prbd-moola-position",hash:{lazyloadtest:null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"lazyLoadValue"):o,upgradeProLink:!1,advertisingStitching:null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"eventStitch"):o,upsellFallback:!1,adUnit:null!=(o=null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"unit"):o)?s(o,"a"):o},data:n,indent:"\t\t\t\t\t",helpers:t,partials:e,decorators:l.decorators}))?o:"")+'\t\t\t\t</div>\n\t\t\t\t<div class="'+i(r(null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"classes"):o)?s(o,"unitB"):o,a))+'">\n'+(null!=(o=l.invokePartial(s(e,"prbd-moola-position"),a,{name:"prbd-moola-position",hash:{lazyloadtest:null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"lazyLoadValue"):o,upgradeProLink:!1,advertisingStitching:null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"eventStitch"):o,upsellFallback:!1,adUnit:null!=(o=null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"ads"):o)?s(o,"unit"):o)?s(o,"b"):o},data:n,indent:"\t\t\t\t\t",helpers:t,partials:e,decorators:l.decorators}))?o:"")+"\t\t\t\t</div>\n"},compiler:[8,">= 4.3.0"],main:function(l,a,t,e,n){var o,r=null!=a?a:l.nullContext||{},i=l.escapeExpression,s=l.lookupProperty||function(l,a){if(Object.prototype.hasOwnProperty.call(l,a))return l[a]};return'<div class="moola-search-view-main-container">\n'+(null!=(o=s(t,"if").call(r,null!=a?s(a,"isEmpty"):a,{name:"if",hash:{},fn:l.program(1,n,0),inverse:l.program(3,n,0),data:n,loc:{start:{line:2,column:1},end:{line:16,column:8}}}))?o:"")+'\t<p class="upgrade-to-pro-cta"><a href="'+i(l.lambda(null!=(o=null!=(o=null!=a?s(a,"templateData"):a)?s(o,"links"):o)?s(o,"upgradePro"):o,a))+'">'+i((s(t,"intlMessage")||a&&s(a,"intlMessage")||l.hooks.helperMissing).call(r,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:n,loc:{start:{line:17,column:75},end:{line:17,column:129}}}))+"</a></p>\n</div>\n"},usePartial:!0,useData:!0}),e={};l.Array.each(["prbd-moola-position","prbd-moola-position"],(function(a){var t=l.Template.get("hermes/"+a);t&&(e[a]=t)})),l.Template.register("hermes/moola-search-view",(function(a,n){return(n=n||{}).partials=n.partials?l.merge(e,n.partials):e,t(a,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position","hermes-template-prbd-moola-position"]});YUI.add("moola-search-view",(function(e,a){var t=require("hermes-core/flog")(a),i=new e.SubscriptionsHelper;e.namespace("Views")["moola-search-view"]=e.Base.create("moola-search-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.mutatedNodes={},this.adConfig,this.templateData,this.scrollThresholdReached=!1,this.lazyLoadBuffer=150,this.adLoadTimeout,this.disableLazyLoading=!0,"a"===this.appContext.flipper.isFlipped("enable-search-page-lazy-loading")?this.lazyLoadBuffer=600:"b"===this.appContext.flipper.isFlipped("enable-search-page-lazy-loading")?this.lazyLoadBuffer=1200:"c"===this.appContext.flipper.isFlipped("enable-search-page-lazy-loading")&&(this.lazyLoadBuffer=1800)},buildContainer:function(){t.log("Ads: Adding an available search ad container"),this.setContainerWithTemplate("moola-search-view",{isEmpty:!0})},activate:function(){return t.log("Ads: Calling activate"),this.disableLazyLoading?(t.log("Ads: Disabled lazing loading. Rendering container and asking ads right away"),this.renderAdContainer(),this.requestAd()):this.scrollThresholdReached?(t.log("Ads: Lazing enabled, and threshold reached. Rendering container and asking ads right away"),this.renderAdContainer(),this.requestAd(),this.adLoadEventListener&&e.globalEvents.unsubscribe(this.adLoadEventListener)):(t.log("Ads: Lazing enabled, and threshold NOT reached. Listening for scroll change."),this.adLoadEventListener=this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.watchViewPosition.bind(this)))),this},renderAdContainer:function(){var a=this.get("container"),s=e.config.flickr.moola.positions.search[0],n=this.appContext.viewportData.getWidth(),o=e.config.flickr.moola.ad_breakpoint_mobile_desktop;if(t.log("Ads: called build container in moola-search-view"),this.templateData={ads:{eventStitch:this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),unit:{a:s[n<o?"ad_unit_mobile_leaderboard":"ad_unit_desktop_a"],b:s[n<o?"ad_unit_mobile":"ad_unit_desktop_b"]},scrollThresholdReached:!!this.disableLazyLoading||this.scrollThresholdReached,lazyLoadValue:this.lazyLoadBuffer.toString()},classes:{unitA:n<o?"moola-search-mob-ad-a":"moola-search-desk-ad-a",unitB:n<o?"moola-search-mob-ad-b":"moola-search-desk-ad-b",container:n<o?"moola-search-mob-container":"moola-search-desk-container"},links:{upgradePro:i.getProLandingPageUrl(i.UTM_HIDE_ADS)}},this.setContainerWithTemplate("moola-search-view",{templateData:this.templateData}),a&&a.one(".moola-container")&&!YUI.Env.isServer&&this.appContext.flipper.isFlipped("enable-search-ad-logs-asc")){a.all(".moola-container").each((function(e){console.log(`ASC: appending div adunit=${e.getDOMNode().getAttribute("data-aa-adunit")} yuid=${e._yuid}`,e.getDOMNode())}))}},requestAd:function(){this.appContext.adManager.processAdsOnPage()},watchViewPosition:function(){const a=this.get("container").getDOMNode();let i,s;a&&(i=a.getBoundingClientRect(),s=i.top<=(e.one(window).get("winHeight")||window.innerHeight||document.documentElement.clientHeight)+this.lazyLoadBuffer,s&&(this.scrollThresholdReached=!0,t.log("Ads: threshold reached. Calling activate now."),this.activate()))},handleMutations:function(){const e=this.get("container").getDOMNode();let a=this;this.nodeObserver=new MutationObserver((e=>{e.forEach((e=>{let t=!1;if(e.target.className.includes("moola-container")){if("attributes"===e.type)if("data-status"===e.attributeName){const a=e.target.getAttribute(e.attributeName);"skipped"!==a&&"error"!==a||(t=!0)}else"none"===e.target.style.display&&(t=!0);t&&!a.mutatedNodes[e.target.parentNode.className]&&(a.mutatedNodes[e.target.parentNode.className]=!0),Object.keys(a.mutatedNodes).length===Object.keys(a.templateData.ads.unit).length&&this.fire("subviewViewEvent","adSlotUnavailable")}}))}));this.nodeObserver.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-status","style"]})},setDataLayerForView:function(){this.appContext.dataLayer.setDataLayerProp("page.onsiteSearchTerm",this.params.searchTerm)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-moola-search-view","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-search-color-picker",(function(l,e){var n=l.Template.Handlebars.revive({1:function(l,e,n,a,o){var t=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t<p class="option-header tabbable" tabindex="0">'+l.escapeExpression((t(n,"intlMessage")||e&&t(e,"intlMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlMessage",hash:{intlName:"search.COLOR"},data:o,loc:{start:{line:2,column:48},end:{line:2,column:87}}}))+"</p>\n"},3:function(l,e,n,a,o){var t,r,c=null!=e?e:l.nullContext||{},i=l.hooks.helperMissing,s="function",u=l.escapeExpression,m=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t\t<li class="color-swatch'+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useDarkCheckMark"):e,{name:"if",hash:{},fn:l.program(4,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:25},end:{line:6,column:67}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useOutline"):e,{name:"if",hash:{},fn:l.program(6,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:67},end:{line:6,column:100}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"selected"):e,{name:"if",hash:{},fn:l.program(8,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:100},end:{line:6,column:131}}}))?t:"")+'" style="background-color: #'+u(typeof(r=null!=(r=m(n,"color")||(null!=e?m(e,"color"):e))?r:i)===s?r.call(c,{name:"color",hash:{},data:o,loc:{start:{line:6,column:159},end:{line:6,column:168}}}):r)+'" data-color-code="'+u(typeof(r=null!=(r=m(n,"colorCode")||(null!=e?m(e,"colorCode"):e))?r:i)===s?r.call(c,{name:"colorCode",hash:{},data:o,loc:{start:{line:6,column:187},end:{line:6,column:200}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:222},end:{line:6,column:254}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:295},end:{line:6,column:327}}}))+'"></li>\n'},4:function(l,e,n,a,o){return" dark-check"},6:function(l,e,n,a,o){return" outline"},8:function(l,e,n,a,o){return" checked"},compiler:[8,">= 4.3.0"],main:function(l,e,n,a,o){var t,r=null!=e?e:l.nullContext||{},c=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return(null!=(t=c(n,"if").call(r,null!=e?c(e,"showTitle"):e,{name:"if",hash:{},fn:l.program(1,o,0),inverse:l.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?t:"")+'<ul class="color-list">\n'+(null!=(t=c(n,"each").call(r,null!=e?c(e,"colors"):e,{name:"each",hash:{},fn:l.program(3,o,0),inverse:l.noop,data:o,loc:{start:{line:5,column:1},end:{line:7,column:10}}}))?t:"")+"</ul>\n"},useData:!0}),a={};l.Array.each([],(function(e){var n=l.Template.get("hermes/"+e);n&&(a[e]=n)})),l.Template.register("hermes/search-color-picker",(function(e,o){return(o=o||{}).partials=o.partials?l.merge(a,o.partials):a,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-color-picker-view",(function(e){var t=[{intlKey:"search.RED",color:"ff2000",colorCode:"0"},{intlKey:"search.DARK_ORANGE",color:"a24615",colorCode:"1"},{intlKey:"search.ORANGE",color:"ff7c00",colorCode:"2"},{intlKey:"search.PALE_PINK",color:"ff9f9c",colorCode:"b"},{intlKey:"search.LEMON_YELLOW",color:"fffa00",colorCode:"4",useDarkCheckMark:!0},{intlKey:"search.SCHOOL_BUS_YELLOW",color:"ffcf00",colorCode:"3",useDarkCheckMark:!0},{intlKey:"search.GREEN",color:"90e200",colorCode:"5"},{intlKey:"search.LIME_GREEN",color:"00ab00",colorCode:"6"},{intlKey:"search.CYAN",color:"00b2d4",colorCode:"7"},{intlKey:"search.BLUE",color:"0062c6",colorCode:"8"},{intlKey:"search.VIOLET",color:"8c20ba",colorCode:"9"},{intlKey:"search.PINK",color:"f52394",colorCode:"a"},{intlKey:"search.WHITE",color:"ffffff",colorCode:"c",useDarkCheckMark:!0,useOutline:!0},{intlKey:"search.GRAY",color:"7c7c7c",colorCode:"d"},{intlKey:"search.BLACK",color:"000000",colorCode:"e"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(r){var o,l=this;return this.searchUrl=r.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),o=this.searchUrl.getAPIParam(e.SearchHelper.API.colorCodes),this.selectedColors=o?o.split(","):[],this.colors=[],t.forEach((function(t){l.colors.push(e.merge(t,{selected:-1!==l.selectedColors.indexOf(t.colorCode)}))})),this.showTitle=r.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-color-picker",{showTitle:this.showTitle,colors:this.colors}),this.updateContainerDisabledState(),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleColorSwatchClick.bind(this),".color-swatch")),this.registerEventHandler(this.get("container").delegate("key",this.handleColorSwatchClick.bind(this),"down:13",".color-swatch")),this},onParentViewEvent:function(e,t){if("search:blackandwhiteStyleSelected"===(t&&t.length&&t[0]))this.clearSelectedColors()},handleColorSwatchClick:function(e){var t=e.target.getData("color-code"),r=this.selectedColors.indexOf(t);if(e.halt(),-1===r){if(this.isContainerDisabled())return;this.selectedColors.push(t),e.target.addClass("checked"),this.updateContainerDisabledState(),this.fire("subviewViewEvent","search:colorSelected")}else this.selectedColors.splice(r,1),e.target.removeClass("checked"),this.updateContainerDisabledState();this.updateSearchUrl()},updateContainerDisabledState:function(){this.selectedColors.length>=5?this.get("container").addClass("disabled"):this.get("container").removeClass("disabled")},isContainerDisabled:function(){return!!this.get("container").hasClass("disabled")},updateSearchUrl:function(){this.searchUrl.clearColorCodes(),this.isDefaultValue()||this.searchUrl.setAPIParam(e.SearchHelper.API.colorCodes,this.selectedColors.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedColors&&this.selectedColors.length)},clearSelectedColors:function(){this.selectedColors=[],this.colors.forEach((function(e){e.selected=0})),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-color-picker","search-helper","search-url"],langBundles:["search"]});